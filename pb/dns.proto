syntax = "proto3";

package pb;

service AgentManager{
rpc StartDNS(DNSStartReq) returns (OperResult){}
rpc StopDNS(DNSStopReq) returns (OperResult){}
rpc CreateACL(CreateACLReq) returns (OperResult){}
rpc UpdateACL(UpdateACLReq) returns (OperResult){}
rpc DeleteACL(DeleteACLReq) returns (OperResult){}
rpc CreateView(CreateViewReq) returns (OperResult){}
rpc UpdateView(UpdateViewReq) returns (OperResult){}
rpc DeleteView(DeleteViewReq) returns (OperResult){}
rpc CreateZone(CreateZoneReq) returns (OperResult){}
rpc DeleteZone(DeleteZoneReq) returns (OperResult){}
rpc CreateRR(CreateRRReq) returns (OperResult){}
rpc UpdateRR(UpdateRRReq) returns (OperResult){}
rpc DeleteRR(DeleteRRReq) returns (OperResult){} 
}

message OperResult {
    int32 ret_code = 1; //operation result:0 stands for success, 1 stands for fail.
    string ret_msg = 2; 
}
message DNSStartReq{
	string config = 1;
}

message DNSStopReq{
}

message CreateACLReq{
string name = 1;
string iD = 2;
repeated string iPs = 3;
}

message UpdateACLReq{
string iD = 1;
string name = 2;
repeated string newIPs = 3;
}

message DeleteACLReq{
string iD = 1;
}

message CreateViewReq{
string viewName = 1;
string viewID = 2;
int32 priority = 3;
repeated string aCLIDs = 4;
}

message UpdateViewReq{
string viewID = 1;
int32 priority = 2;
repeated string deleteACLIDs = 3;
repeated string addACLIDs = 4;
}

message DeleteViewReq{
string viewID = 1;
}

message CreateZoneReq{
string viewID = 1;
string zoneID = 2;
string zoneName = 3;
string zoneFileName = 4;
}

message DeleteZoneReq{
string viewID = 1;
string zoneID = 2;
}

message CreateRRReq{
string viewID = 1;
string zoneID = 2;
string rRID = 3;
string rRData = 4;
}

message UpdateRRReq{
string viewID = 1;
string zoneID = 2;
string rRID = 3;
string newRRData = 4;
}

message DeleteRRReq{
string viewID = 1;
string zoneID = 2;
string rRID = 3;
}


